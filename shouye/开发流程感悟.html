<!DOCTYPE html>
<html>
	<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
		<meta charset="UTF-8">
	<!-- Bootstrap -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		

    <script src="../js/jquery-1.11.3.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/scrollReveal.js"></script>
		<title>开发流程感悟</title>
		<link rel="stylesheet" href="../css/blogfeleilist.css" />
	</head>
	<body>			
			<nav class="navbar navbar-default navbar-inverse navbar-fixed-top">
					<div class="container">
  			<div class="container-fluid ">
  
   	 <!-- Brand and toggle get grouped for better mobile display -->
   				 <div class="navbar-header">
     		 <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
     
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="active"><a href="a.html">JAVA</a></li>
        <li><a href="b.html"></a>DATABASE</li>
        <li><a href="c.html">LINUX</a></li>
        <li><a href="d.html">HTML5</a></li>
        <li><a href="e.html">C</a></li>
        <li><a href="f.html">SPRING</a></li>
        <li><a href="g.html">STRUTS</a></li>
        <li><a href="h.html">HIBEINATE</a></li>
        <li><a href="i.html">BOOTSTRAP</a></li>
          </ul>
        </li>
      </ul>
    
      <ul class="nav navbar-nav navbar-right">
        <li><a href="j.html">BOOK</a></li>
        <li><a href="zhuye.html">BACK</a></li>
        <li><a href="zhuye.html?#contact">CONTACT ME</a></li>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
		</div>
			</nav>
		<div id="mainmianban">
			<h1>关于开发流程的感悟</h1>
			<h2 id="id-目录组织与命名">目录组织与命名</h2>
<h3 id="id-目录组织">目录组织</h3>
<p>不同语言下的目录组织可能会有很大的差异，但是都遵循以下共识：</p>
<ul>
<li>语义贴切：文件／目录的命名要尽可能表达其功能／用途</li>
<li>集中原则：功能相近的文件／目录应集中存放</li>
</ul>
<p>例如：</p>
<pre class="brush: java; gutter: true">your_project /
|-- contrib /        # 存放一些如 rpm.spec，脚本等等
|-- doc /            # 文档相关
|-- examples /       # 样例说明
|-- etc(or conf) /   # 配置文件
|-- src /
    |-- api /               # api 相关代码
    |-- cmd(or cli) /       # command 相关代码，
    |-- db /                # database 相关代码
    |-- rpc /               # rpc 相关代码
    |-- tests /             # 测试文件目录
    |-- utils(or common) /  # 一些公共的方法
    |-- ...                 # 其它目录/文件
|-- README           # 项目说明
|-- .gitigore        # 忽略的 git 文件和目录
|-- ...              # 其它目录／文件</pre>
<ul>
<li>api：存放 api 相关代码，比如 route，filter，middleware，serialize/de-serialize 等。</li>
<li>contrib：存放一些编包的文件，git 的 patch 文件，systemd 的配置文件，以及脚本等等。</li>
<li>db：存放 database(如：sql/<span class='wp_keywordlink'><a  href="http://blog.jobbole.com/1344/" title="8种Nosql数据库系统对比" target="_blank" class="external" rel="nofollow">NoSQL</a></span>) 相关代码，包括 model, connection, session，orm/sql。是代码层面访问 db 的唯一入口，建议所有访问 database 的操作都必须在代码层面经过 db 目录下的代码。</li>
<li>utils：一般存放一些公共的方法，如 time／date，encoding／decoding，exec，regex，uuid，string／json 等等。</li>
</ul>
<p>推荐阅读：</p>
<ul>
<li><a  href="https://stackoverflow.com/questions/193161/what-is-the-best-project-structure-for-a-python-application" class="external" rel="nofollow" target="_blank">What is the best project structure for a Python application?</a></li>
<li><a  href="https://stackoverflow.com/questions/14867452/what-is-a-sensible-way-to-layout-a-go-project" class="external" rel="nofollow" target="_blank">What is a sensible way to layout a Go project</a></li>
</ul>
<h3 id="id-命名">命名</h3>
<p>匈牙利命名法和 unix 命名法是常见的命名风格，一般来说，c 和 python 以 unix 命名法居多，golang 和 java 以匈牙利命名法居多。编程过程中，遵循一致的命名风格，会使得代码更为美观，可读性强。</p>
<p>编程中贴切的缩写常见单词，可使得代码更为简洁美观，但是缩写最好应遵循某些约定成俗，避免产生歧义。</p>
<p>一般情况下不建议采用拼音命名和拼音缩写。</p>
<p>推荐阅读：</p>
<ul>
<li><a  href="https://google.github.io/styleguide/pyguide.html" class="external" rel="nofollow" target="_blank">Google Python Style Guides</a></li>
<li><a  href="https://google.github.io/styleguide/shell.xml" class="external" rel="nofollow" target="_blank">Google Shell Style Guide</a></li>
<li><a  href="http://www.abbreviations.com/" class="external" rel="nofollow" target="_blank">一个查单词缩写的网站</a></li>
</ul>
<h2 id="id-发布与运行">发布与运行</h2>
<p>为什么应用的发布和运行也应该遵循一定的规则呢？首先，用户体验更好。比如，软件工程师习惯性在 /etc 寻找配置文件，/var/log 寻找日志文件。其次，遵循这些规则有利于被运维软件管理，如 ansible，chef 等等。最后，linux 及相关软件在设计时就已经遵循这些规则，如果你的应用不遵循，可能会产生某些冲突。</p>
<h3 id="id-版本号">版本号</h3>
<p>发布版本时，版本号的命名需要遵循某种规则，其中 Semantic Versioning 2.0.0 定义了一套简单的规则。重点如下： 版本号的格式为 X.Y.Z(又称 Major.Minor.Patch)，递增的规则为：</p>
<ul>
<li>X 表示主版本号，当 API 的兼容性变化时，X 需递增。</li>
<li>Y 表示次版本号，当增加功能时(不影响 API 的兼容性)，Y 需递增。</li>
<li>Z 表示修订号，当做 Bug 修复时(不影响 API 的兼容性)，Z 需递增。</li>
</ul>
<ol>
<li>X, Y, Z 必须为非负整数，且不得包含前导零，必须按数值递增，如 1.9.0 -&gt; 1.10.0 -&gt; 1.11.0</li>
<li>当 API 的兼容性变化时，X 必须递增，Y 和 Z 同时设置为 0；当新增功能(不影响 API 的兼容性)或者 API 被标记为 Deprecated 时，Y 必须递增，同时 Z 设置为 0；当进行 bug fix 时，Z 必须递增。</li>
<li>版本一经发布，不得修改其内容，任何修改必须在新版本发布！</li>
</ol>
<p>推荐阅读：</p>
<ul>
<li><a  href="https://semver.org/" class="external" rel="nofollow" target="_blank">Semantic Versioning 2.0.0</a></li>
</ul>
<h3 id="id-打包">打包</h3>
<p>不同语言的应用可能有不同的打包和发布规范，如 java 的 jar 包，python 的 wheel 包，它们极大的简化了应用的安装／升级／管理等等，非常方便的解决了版本和依赖问题。但是上述的打包方式在通用性上有所欠缺，只能被特定语言的工具管理，比如 jar 包需要被 maven 等管理，wheel 包需要 pip 等管理。为此 Redhat 定义了 <a  href="http://wsfdl.com/architecture/2017/12/18/daemon_normalize_arch.html" class="external" rel="nofollow" target="_blank">redhat package management</a>(即 rpm 包)，所有语言的应用都可以制作成 rpm 包，然后用 rpm 和 yum 等常用工具进行管理。与此类似，ubuntu 也定义了 debian 包。</p>
<p>个人认为，应用最好以软件包的形式发布，避免直接拷贝源码或者二进制文件到线上。</p>
<p>推荐阅读：</p>
<ul>
<li><a  href="https://fedoraproject.org/wikiHow_to_create_an_RPM_package/zh-cn" class="external" rel="nofollow" target="_blank">How to create an RPM package</a></li>
<li><a  href="http://wsfdl.com/python/2015/09/06/Python%E5%BA%94%E7%94%A8%E7%9A%84%E6%89%93%E5%8C%85%E5%92%8C%E5%8F%91%E5%B8%83%E4%B8%8A.html" class="external" rel="nofollow" target="_blank">Python application 的打包和发布</a></li>
</ul>
<h3 id="id-运行">运行</h3>
<p>一个应用可能包涵配置文件，代码库，可执行文件等等，这些文件的存放也所讲究，一般来说：</p>
<ul>
<li>可执行文件应存放于 /usr/bin 或者 /usr/local/bin 目录下</li>
<li>代码或者库应放于 /usr/lib 或者 /var/lib 目录下</li>
<li>配置文件应存放于 /etc/your_project/ 目录下</li>
<li>日志文件应存放于 /var/log/your_project 目录下</li>
<li>systemd 相关脚本应该放置于 /usr/lib/systemd/system/ 目录下</li>
<li>logrotate 相关脚本应该放置于 /etc/logrotate.d/ 目录下</li>
</ul>
<p>个人不建议把应用放在 /home 目录下。</p>
<h2 id="id-测试">测试</h2>
<p>测试可分为单元测试／集成测试／性能测试。需不需要测试，需要哪些测试，测试覆盖率为多少和很多因素有关，个人认为：</p>
<ul>
<li>代码越多，测试越重要</li>
<li>动态语言，测试越重要</li>
<li>开发人员越多，测试越重要</li>
</ul>
<p>从经验上看，很多项目一般都会有集成测试，但是很少有单元测试。这里想谈谈单元测试的重要性，它很大程度上保证了新加的代码不会影响原有的逻辑。首先这种代码级别首先更为精细，能够针对性的覆盖重要功能代码。其次，单元测试的运行一般不依赖具体环境，能够随时编写随时测试。再次，单元测试能够在一定程度上维护代码的结构。最后，都说动态一时爽，<span class='wp_keywordlink'><a  href="http://www.amazon.cn/gp/product/B003BY6PLK/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&#038;tag=importnew-23&#038;linkCode=as2&#038;camp=536&#038;creative=3200&#038;creativeASIN=B003BY6PLK" title="重构" rel="nofollow" target="_blank" class="external">重构</a></span>火葬场，而完整的单元测试是避免火葬场的重要手段。</p>
<p>很多语言都有测试框架和工具，这些工具功能强大，如：运行测试，生成测试报告，代码风格规范检查，集成 jenkins 等等。建议根据需要选择合适的测试框架。</p>
<p>推荐阅读：</p>
<ul>
<li><a  href="https://tox.readthedocs.io/en/latest/" class="external" rel="nofollow" target="_blank">tox vision: standardize testing in Python</a></li>
<li><a  href="http://ufdouble.com/2016/07/%E8%B0%88%E8%B0%88%E5%BC%80%E5%8F%91%E4%B8%AD%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E7%9A%84%E9%87%8D%E8%A6%81%E6%80%A7/" class="external" rel="nofollow" target="_blank">谈谈开发中单元测试的重要性</a></li>
</ul>
		</div>
<script>
if (!(/msie [6|7|8|9]/i.test(navigator.userAgent))){
		(function(){
		window.scrollReveal = new scrollReveal({reset: true});
	})();
};
$('#myTab a').click(function (e) {
  e.preventDefault();
  $(this).tab('show');
})

$('a[data-toggle="tab"]').on('shown', function (e) {
  e.target // activated tab
  
})
 
</script>
	</body>
</html>
	</body>
</html>